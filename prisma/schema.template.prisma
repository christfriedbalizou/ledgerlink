// prisma/schema.template.prisma

// Set up the Prisma client generator.
generator client {
  provider = "prisma-client-js"
}

// ----------------------------------------------------
// Data Models
// ----------------------------------------------------

// User model: stores user information and their authentication data.
// The is_admin field is crucial for your Oct 4 task.

model User {
  id        String    @id @default(uuid())
  email     String    @unique
  is_admin  Boolean   @default(false)
  accounts  Account[]
  plaidItems PlaidItem[]
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

model Account {
  id                String   @id @default(uuid())
  userId            String
  plaidItemId       String   @unique
  institutionName   String
  institutionId     String
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  user              User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model PlaidItem {
  id                String   @id @default(uuid())
  userId            String
  plaidItemId       String   @unique
  plaidAccessToken  String   // Encrypted
  products          String   // Comma-separated list of products
  institutionName   String
  institutionId     String
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  user              User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}
